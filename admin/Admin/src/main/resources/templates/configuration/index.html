<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"
      layout:decorate="~{layout/layout}">
<head>
    <meta charset="UTF-8">
    <title th:text="'系统配置-' + ${title}"></title>
    <style>
        .layui-upload-img {
            width: 92px;
            height: 92px;
            margin: 0 10px 10px 0;
        }

        .photo {
            float: left;
            position: relative;
            left: 20px;
        }
        .bannerUrl {
            margin-left: 20px;
        }

        .form-line{
            display: block;width: 100%;height: 200px;
        }

        .my-body {
            overflow: scroll !important;
        }
    </style>
</head>
<body>
<th:block layout:fragment="current_page">
    <a href="/management/configuration/index"><cite>系统配置管理</cite></a>
</th:block>

<th:block layout:fragment="body">
    <!--banner图片管理-->
    <div style="height: 360px;" class="form-line">
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
            <legend>banner图管理</legend>
        </fieldset>
        <div class="layui-upload">
            <div class="photo">
                <button type="button" class="layui-btn" id="banner1">上传图片</button>
                <div class="layui-upload-list">
                    <img class="layui-upload-img" id="demo1" th:each="banner:${banner}" th:if="${banner.getKey()}=='banner.image1'" th:src="${banner.getValue()}" >
                    <p id="demoText"></p>
                </div>
            </div>
            <div class="photo">
                <button type="button" class="layui-btn" id="banner2">上传图片</button>
                <div class="layui-upload-list">
                    <img class="layui-upload-img" id="demo2" th:each="banner:${banner}" th:if="${banner.getKey()}=='banner.image2'" th:src="${banner.getValue()}">
                    <p id="demoText1"></p>
                </div>
            </div>
            <div class="photo">
                <button type="button" class="layui-btn" id="banner3">上传图片</button>
                <div class="layui-upload-list">
                    <img class="layui-upload-img" id="demo3" th:each="banner:${banner}" th:if="${banner.getKey()}=='banner.image3'" th:src="${banner.getValue()}">
                    <p id="demoText2"></p>
                </div>
            </div>
        </div>
        <!--轮播图链接地址-->
        <div class="bannerUrl">
            <div class="layui-form-item">
                <button type="button" style="float: left"  class="layui-btn" id="btnUrl1">上传轮播图地址</button>
                <div class="layui-input-block">
                    <input type="text" id="bannerUrl1"  th:each="banner:${banner}" th:if="${banner.getKey()}=='banner.image1.targetUrl'" th:value="${banner.getValue()}"  style="width: 50%" required  lay-verify="required"  autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <button type="button" style="float: left" class="layui-btn" id="btnUrl2">上传轮播图地址</button>
                <div class="layui-input-block">
                    <input type="text" id="bannerUrl2"  th:each="banner:${banner}" th:if="${banner.getKey()}=='banner.image2.targetUrl'" th:value="${banner.getValue()}"  style="width: 50%" required  lay-verify="required"  autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <button type="button" style="float: left" class="layui-btn" id="btnUrl3">上传轮播图地址</button>
                <div class="layui-input-block">
                    <input type="text" id="bannerUrl3"  th:each="banner:${banner}" th:if="${banner.getKey()}=='banner.image3.targetUrl'" th:value="${banner.getValue()}"  style="width: 50%" required  lay-verify="required"  autocomplete="off" class="layui-input">
                </div>
            </div>
        </div>
    </div>
    <!--全站广告-->
    <div class="form-line" style="height: 250px">
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
            <legend>全站广告</legend>
        </fieldset>
        <div class="layui-upload">
            <div class="photo">
                <button type="button" class="layui-btn" id="total">上传图片</button>
                <div class="layui-upload-list">
                    <img class="layui-upload-img" id="station" th:each="banner:${banner}" th:if="${banner.getKey()}=='webapp.image.ad.url'" th:src="${banner.getValue()}">
                </div>
            </div>
        </div>
        <!--全站广告链接地址-->
        <div class="bannerUrl">
            <div class="layui-form-item">
                <button type="button" style="float: left"  class="layui-btn" id="totalUrl">上传全站广告地址</button>
                <div class="layui-input-block">
                    <input type="text" id="stationUrl"  th:each="banner:${banner}" th:if="${banner.getKey()}=='webapp.image.ad.target.url'" th:value="${banner.getValue()}"  style="width: 50%" required  lay-verify="required"  autocomplete="off" class="layui-input">
                </div>
            </div>
        </div>
    </div>
    <!--APP启动图片-->
    <div class="app form-line">
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
            <legend>APP启动图管理</legend>
        </fieldset>
        <div class="layui-upload">
            <div class="photo">
                <button type="button" class="layui-btn" id="app1">上传图片</button>
                <div class="layui-upload-list">
                    <img class="layui-upload-img" id="appone" th:each="banner:${banner}" th:if="${banner.getKey()}=='bootstrap.image1'" th:src="${banner.getValue()}" >
                    <p></p>
                </div>
            </div>
            <div class="photo">
                <button type="button" class="layui-btn" id="app2">上传图片</button>
                <div class="layui-upload-list">
                    <img class="layui-upload-img" id="apptwo" th:each="banner:${banner}" th:if="${banner.getKey()}=='bootstrap.image2'" th:src="${banner.getValue()}">
                    <p></p>
                </div>
            </div>
            <div class="photo">
                <button type="button" class="layui-btn" id="app3">上传图片</button>
                <div class="layui-upload-list">
                    <img class="layui-upload-img" id="appthree" th:each="banner:${banner}" th:if="${banner.getKey()}=='bootstrap.image3'" th:src="${banner.getValue()}">
                    <p></p>
                </div>
            </div>
        </div>
    </div>
    <!--公告管理-->
    <div style="height: 140px" class="app form-line">
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
            <legend>公告管理</legend>
            <div style="padding: 20px" class="layui-upload">
                <input type="text" style="width: 34%" id="announcement" lay-verify="title" th:each="banner:${banner}" th:if="${banner.getKey()}=='home.text.ad'" th:value="${banner.getValue()}" autocomplete="off"  class="layui-input">
                <div style="height: 10px"></div>
                <button type="button"  class="layui-btn" id="title">修改公告</button>
            </div>
        </fieldset>
    </div>
    <!--版本管理-->
    <div class="app form-line">
        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
            <legend>版本管理</legend>
            <div style="padding: 20px" class="layui-upload">
                <label class="layui-form-label">版本</label>
                <input type="text" style="width: 20%" id="version" lay-verify="title" th:each="banner:${banner}" th:if="${banner.getKey()}=='version'" th:value="${banner.getValue()}" autocomplete="off"  class="layui-input">

                <label class="layui-form-label">IOS下载</label>
                <input type="text" style="width: 20%" id="ios" lay-verify="title" th:each="banner:${banner}" th:if="${banner.getKey()}=='iosDownload'" th:value="${banner.getValue()}" autocomplete="off"  class="layui-input">

                <label class="layui-form-label">Android下载</label>
                <input type="text" style="width: 20%" id="android" lay-verify="title" th:each="banner:${banner}" th:if="${banner.getKey()}=='androidDownload'" th:value="${banner.getValue()}" autocomplete="off"  class="layui-input">
                <div style="height: 10px"></div>
                <button type="button" class="layui-btn" id="ver">更改版本</button>
            </div>
        </fieldset>
    </div>


</th:block>
<th:block layout:fragment="free_footer">
    <script>
        function uploadConfig(key,value) {
            $.ajax({
                url:"/management/configuration/upadteConfig",
                type:"POST",
                data:{
                    key:key,
                    value:value
                },
                contentType:"application/x-www-form-urlencoded;charset=UTF-8",
                success:function (data) {
                    if (data.code==200){
                        layui.use('layer', function(){
                            var layer = layui.layer;
                            layer.msg('上传成功', {icon: 6,time: 2000});
                        });
                    }else {
                        layer.msg('上传失败', {icon: 5,time: 2000});
                    }

                }
            })
        }
    </script>
    <script type="text/javascript" src="/js/configuration/config.js"></script>

</th:block>
</body>
</html>